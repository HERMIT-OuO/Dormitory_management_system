{"remainingRequest":"E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js!E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\D2Crud\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\D2Crud\\index.vue","mtime":1559227409896},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js","mtime":1558363759028}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Vue from 'vue'\r\nimport D2Crud from '@d2-projects/d2-crud'\r\nimport axios from 'axios'\r\nimport Qs from 'qs'\r\n\r\nVue.use(D2Crud)\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      mydormid:'',\r\n      mytext:'',\r\n      columns: [\r\n        {\r\n          title: '学号',\r\n          key: 'userid',\r\n          width: '250'\r\n        },\r\n        {\r\n          title: '申诉人',\r\n          key: 'username',\r\n          width: '180'\r\n        },\r\n        {\r\n          title: '宿舍号',\r\n          key: 'dormid',\r\n          width: '180'\r\n        },\r\n        {\r\n          title: '报修内容',\r\n          key: 'text',\r\n          width: '300'\r\n        },\r\n        {\r\n          title: '状态',\r\n          key: 'statues',\r\n          width: '180',\r\n          filters: [\r\n            { text: '待处理', value: '待处理' },\r\n            { text: '正在处理', value: '正在处理' },\r\n            { text: '已处理', value: '已处理' }\r\n          ],\r\n          filterMethod (value, row) {\r\n            return row.statues === value\r\n          },\r\n          filterPlacement: 'bottom-end'\r\n        }\r\n      ],\r\n      data: [\r\n        \r\n      ],\r\n      options: {\r\n        stripe:true,\r\n        highlightCurrentRow:true,\r\n        border:true\r\n      },\r\n      rowHandle: {\r\n        columnHeader: '操作',\r\n        custom: [\r\n          {\r\n            text: '更改状态',\r\n            type: 'primary',\r\n            size: 'small',\r\n            fixed: 'left',\r\n            icon: 'el-icon-circle-check',\r\n            emit: 'custom-emit-1'\r\n          }\r\n        ],\r\n        remove: {\r\n          icon: 'el-icon-delete',\r\n          size: 'small',\r\n          fixed: 'right',\r\n          confirm: true\r\n        }\r\n      },\r\n      formOptions: {\r\n        labelWidth: '80px',\r\n        labelPosition: 'left',\r\n        saveLoading: false,\r\n        gutter: 20\r\n      }\r\n    }\r\n  },\r\n  filters:{\r\n    searchStudent:function(arr){\r\n      var newData = []\r\n      for(var i=0;i<arr.length;i++){\r\n        if(arr[i].id.indexOf(myid))\r\n          newData.pust(arr[i])  \r\n      }\r\n      return newData\r\n    }\r\n  },\r\n  methods: {\r\n     // 普通的新增\r\n    addRow () {\r\n      this.$refs.d2Crud.showDialog({\r\n        mode: 'add'\r\n      })\r\n    },\r\n     handleCustomEvent ({index, row}) {\r\n      if(row.statues=='待处理')\r\n        row.statues='正在处理'\r\n      else if(row.statues=='正在处理')\r\n        row.statues='已完成'\r\n      else\r\n        row.statues='待处理'\r\n      this.alterApp(row)\r\n    },\r\n    handleRowRemove ({index, row},done) {\r\n      setTimeout(() => {\r\n        this.$message({\r\n          message: '删除成功',\r\n          type: 'success'\r\n        })\r\n        done()\r\n        this.delApp(row)\r\n      }, 300)\r\n    },\r\n    handleDialogCancel (done) {\r\n      this.$message({\r\n        message: '取消保存',\r\n        type: 'warning'\r\n      });\r\n      done()\r\n    },\r\n    handleSelectionChange (selection) {\r\n      console.log(selection)\r\n    },\r\n    getAllApp(){\r\n      var _this = this\r\n      axios.get('http://localhost:8080/GetAllApp')\r\n        .then(function (response) {\r\n          console.log(response)\r\n          _this.data = response.data\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    alterApp(row){\r\n      axios.post('http://localhost:8080/AlterAppRow',Qs.stringify(row))\r\n      .then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    },\r\n    delApp(row){\r\n      //删除某一行，获取当前行的ID，\r\n      axios.post('http://localhost:8080/DelAppRow',Qs.stringify({text:row.text}))\r\n      .then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n      \r\n    },\r\n  },\r\n  mounted(){\r\n    this.getAllApp()\r\n  }\r\n}\r\n\r\n",null]}