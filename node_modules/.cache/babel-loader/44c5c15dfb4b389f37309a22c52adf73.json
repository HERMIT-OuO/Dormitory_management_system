{"remainingRequest":"E:\\ICE\\VUE-ADMIN\\node_modules\\thread-loader\\dist\\cjs.js!E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js!E:\\ICE\\VUE-ADMIN\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\ICE\\VUE-ADMIN\\src\\store\\modules\\d2admin\\modules\\db.js","dependencies":[{"path":"E:\\ICE\\VUE-ADMIN\\src\\store\\modules\\d2admin\\modules\\db.js","mtime":1558363759005},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import util from '@/libs/util';\nimport router from '@/router';\nimport { cloneDeep } from 'lodash';\n/**\n * @description 检查路径是否存在 不存在的话初始化\n * @param {Object} param dbName {String} 数据库名称\n * @param {Object} param path {String} 路径\n * @param {Object} param user {Boolean} 区分用户\n * @param {Object} param validator {Function} 数据校验钩子 返回 true 表示验证通过\n * @param {Object} param defaultValue {*} 初始化默认值\n * @returns {String} 可以直接使用的路径\n */\n\nfunction pathInit(_ref) {\n  var _ref$dbName = _ref.dbName,\n      dbName = _ref$dbName === void 0 ? 'database' : _ref$dbName,\n      _ref$path = _ref.path,\n      path = _ref$path === void 0 ? '' : _ref$path,\n      _ref$user = _ref.user,\n      user = _ref$user === void 0 ? true : _ref$user,\n      _ref$validator = _ref.validator,\n      validator = _ref$validator === void 0 ? function () {\n    return true;\n  } : _ref$validator,\n      _ref$defaultValue = _ref.defaultValue,\n      defaultValue = _ref$defaultValue === void 0 ? '' : _ref$defaultValue;\n  var uuid = util.cookies.get('uuid') || 'ghost-uuid';\n  var currentPath = \"\".concat(dbName, \".\").concat(user ? \"user.\".concat(uuid) : 'public').concat(path ? \".\".concat(path) : '');\n  var value = util.db.get(currentPath).value();\n\n  if (!(value !== undefined && validator(value))) {\n    util.db.set(currentPath, defaultValue).write();\n  }\n\n  return currentPath;\n}\n\nexport default {\n  namespaced: true,\n  actions: {\n    /**\n     * @description 将数据存储到指定位置 | 路径不存在会自动初始化\n     * @description 效果类似于取值 dbName.path = value\n     * @param {Object} param dbName {String} 数据库名称\n     * @param {Object} param path {String} 存储路径\n     * @param {Object} param value {*} 需要存储的值\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    set: function set(context, _ref2) {\n      var _ref2$dbName = _ref2.dbName,\n          dbName = _ref2$dbName === void 0 ? 'database' : _ref2$dbName,\n          _ref2$path = _ref2.path,\n          path = _ref2$path === void 0 ? '' : _ref2$path,\n          _ref2$value = _ref2.value,\n          value = _ref2$value === void 0 ? '' : _ref2$value,\n          _ref2$user = _ref2.user,\n          user = _ref2$user === void 0 ? false : _ref2$user;\n      util.db.set(pathInit({\n        dbName: dbName,\n        path: path,\n        user: user\n      }), value).write();\n    },\n\n    /**\n     * @description 获取数据\n     * @description 效果类似于取值 dbName.path || defaultValue\n     * @param {Object} param dbName {String} 数据库名称\n     * @param {Object} param path {String} 存储路径\n     * @param {Object} param defaultValue {*} 取值失败的默认值\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    get: function get(context, _ref3) {\n      var _ref3$dbName = _ref3.dbName,\n          dbName = _ref3$dbName === void 0 ? 'database' : _ref3$dbName,\n          _ref3$path = _ref3.path,\n          path = _ref3$path === void 0 ? '' : _ref3$path,\n          _ref3$defaultValue = _ref3.defaultValue,\n          defaultValue = _ref3$defaultValue === void 0 ? '' : _ref3$defaultValue,\n          _ref3$user = _ref3.user,\n          user = _ref3$user === void 0 ? false : _ref3$user;\n      return new Promise(function (resolve) {\n        resolve(cloneDeep(util.db.get(pathInit({\n          dbName: dbName,\n          path: path,\n          user: user,\n          defaultValue: defaultValue\n        })).value()));\n      });\n    },\n\n    /**\n     * @description 获取存储数据库对象\n     * @param {Object} context context\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    database: function database(context) {\n      var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref4$user = _ref4.user,\n          user = _ref4$user === void 0 ? false : _ref4$user;\n\n      return new Promise(function (resolve) {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: '',\n          user: user,\n          defaultValue: {}\n        })));\n      });\n    },\n\n    /**\n     * @description 清空存储数据库对象\n     * @param {Object} context context\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    databaseClear: function databaseClear(context) {\n      var _ref5 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref5$user = _ref5.user,\n          user = _ref5$user === void 0 ? false : _ref5$user;\n\n      return new Promise(function (resolve) {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: '',\n          user: user,\n          validator: function validator() {\n            return false;\n          },\n          defaultValue: {}\n        })));\n      });\n    },\n\n    /**\n     * @description 获取存储数据库对象 [ 区分页面 ]\n     * @param {Object} context context\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    databasePage: function databasePage(context) {\n      var _ref6 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref6$basis = _ref6.basis,\n          basis = _ref6$basis === void 0 ? 'fullPath' : _ref6$basis,\n          _ref6$user = _ref6.user,\n          user = _ref6$user === void 0 ? false : _ref6$user;\n\n      return new Promise(function (resolve) {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: \"$page.\".concat(router.app.$route[basis]),\n          user: user,\n          defaultValue: {}\n        })));\n      });\n    },\n\n    /**\n     * @description 清空存储数据库对象 [ 区分页面 ]\n     * @param {Object} context context\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    databasePageClear: function databasePageClear(context) {\n      var _ref7 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          _ref7$basis = _ref7.basis,\n          basis = _ref7$basis === void 0 ? 'fullPath' : _ref7$basis,\n          _ref7$user = _ref7.user,\n          user = _ref7$user === void 0 ? false : _ref7$user;\n\n      return new Promise(function (resolve) {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: \"$page.\".concat(router.app.$route[basis]),\n          user: user,\n          validator: function validator() {\n            return false;\n          },\n          defaultValue: {}\n        })));\n      });\n    },\n\n    /**\n     * @description 快速将页面当前的数据 ( $data ) 持久化\n     * @param {Object} context context\n     * @param {Object} param instance {Object} vue 实例\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    pageSet: function pageSet(context, _ref8) {\n      var instance = _ref8.instance,\n          _ref8$basis = _ref8.basis,\n          basis = _ref8$basis === void 0 ? 'fullPath' : _ref8$basis,\n          _ref8$user = _ref8.user,\n          user = _ref8$user === void 0 ? false : _ref8$user;\n      return new Promise(function (resolve) {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: \"$page.\".concat(router.app.$route[basis], \".$data\"),\n          user: user,\n          validator: function validator() {\n            return false;\n          },\n          defaultValue: cloneDeep(instance.$data)\n        })));\n      });\n    },\n\n    /**\n     * @description 快速获取页面快速持久化的数据\n     * @param {Object} context context\n     * @param {Object} param instance {Object} vue 实例\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    pageGet: function pageGet(context, _ref9) {\n      var instance = _ref9.instance,\n          _ref9$basis = _ref9.basis,\n          basis = _ref9$basis === void 0 ? 'fullPath' : _ref9$basis,\n          _ref9$user = _ref9.user,\n          user = _ref9$user === void 0 ? false : _ref9$user;\n      return new Promise(function (resolve) {\n        resolve(cloneDeep(util.db.get(pathInit({\n          dbName: 'database',\n          path: \"$page.\".concat(router.app.$route[basis], \".$data\"),\n          user: user,\n          defaultValue: cloneDeep(instance.$data)\n        })).value()));\n      });\n    },\n\n    /**\n     * @description 清空页面快照\n     * @param {Object} context context\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    pageClear: function pageClear(context, _ref10) {\n      var _ref10$basis = _ref10.basis,\n          basis = _ref10$basis === void 0 ? 'fullPath' : _ref10$basis,\n          _ref10$user = _ref10.user,\n          user = _ref10$user === void 0 ? false : _ref10$user;\n      return new Promise(function (resolve) {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: \"$page.\".concat(router.app.$route[basis], \".$data\"),\n          user: user,\n          validator: function validator() {\n            return false;\n          },\n          defaultValue: {}\n        })));\n      });\n    }\n  }\n};",{"version":3,"sources":["E:\\ICE\\VUE-ADMIN\\src\\store\\modules\\d2admin\\modules\\db.js"],"names":["util","router","cloneDeep","pathInit","dbName","path","user","validator","defaultValue","uuid","cookies","get","currentPath","value","db","undefined","set","write","namespaced","actions","context","Promise","resolve","database","databaseClear","databasePage","basis","app","$route","databasePageClear","pageSet","instance","$data","pageGet","pageClear"],"mappings":"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","sourcesContent":["import util from '@/libs/util'\nimport router from '@/router'\nimport { cloneDeep } from 'lodash'\n\n/**\n * @description 检查路径是否存在 不存在的话初始化\n * @param {Object} param dbName {String} 数据库名称\n * @param {Object} param path {String} 路径\n * @param {Object} param user {Boolean} 区分用户\n * @param {Object} param validator {Function} 数据校验钩子 返回 true 表示验证通过\n * @param {Object} param defaultValue {*} 初始化默认值\n * @returns {String} 可以直接使用的路径\n */\nfunction pathInit ({\n  dbName = 'database',\n  path = '',\n  user = true,\n  validator = () => true,\n  defaultValue = ''\n}) {\n  const uuid = util.cookies.get('uuid') || 'ghost-uuid'\n  const currentPath = `${dbName}.${user ? `user.${uuid}` : 'public'}${path ? `.${path}` : ''}`\n  const value = util.db.get(currentPath).value()\n  if (!(value !== undefined && validator(value))) {\n    util.db\n      .set(currentPath, defaultValue)\n      .write()\n  }\n  return currentPath\n}\n\nexport default {\n  namespaced: true,\n  actions: {\n    /**\n     * @description 将数据存储到指定位置 | 路径不存在会自动初始化\n     * @description 效果类似于取值 dbName.path = value\n     * @param {Object} param dbName {String} 数据库名称\n     * @param {Object} param path {String} 存储路径\n     * @param {Object} param value {*} 需要存储的值\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    set (context, {\n      dbName = 'database',\n      path = '',\n      value = '',\n      user = false\n    }) {\n      util.db.set(pathInit({\n        dbName,\n        path,\n        user\n      }), value).write()\n    },\n    /**\n     * @description 获取数据\n     * @description 效果类似于取值 dbName.path || defaultValue\n     * @param {Object} param dbName {String} 数据库名称\n     * @param {Object} param path {String} 存储路径\n     * @param {Object} param defaultValue {*} 取值失败的默认值\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    get (context, {\n      dbName = 'database',\n      path = '',\n      defaultValue = '',\n      user = false\n    }) {\n      return new Promise(resolve => {\n        resolve(cloneDeep(util.db.get(pathInit({\n          dbName,\n          path,\n          user,\n          defaultValue\n        })).value()))\n      })\n    },\n    /**\n     * @description 获取存储数据库对象\n     * @param {Object} context context\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    database (context, {\n      user = false\n    } = {}) {\n      return new Promise(resolve => {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: '',\n          user,\n          defaultValue: {}\n        })))\n      })\n    },\n    /**\n     * @description 清空存储数据库对象\n     * @param {Object} context context\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    databaseClear (context, {\n      user = false\n    } = {}) {\n      return new Promise(resolve => {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: '',\n          user,\n          validator: () => false,\n          defaultValue: {}\n        })))\n      })\n    },\n    /**\n     * @description 获取存储数据库对象 [ 区分页面 ]\n     * @param {Object} context context\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    databasePage (context, {\n      basis = 'fullPath',\n      user = false\n    } = {}) {\n      return new Promise(resolve => {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: `$page.${router.app.$route[basis]}`,\n          user,\n          defaultValue: {}\n        })))\n      })\n    },\n    /**\n     * @description 清空存储数据库对象 [ 区分页面 ]\n     * @param {Object} context context\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    databasePageClear (context, {\n      basis = 'fullPath',\n      user = false\n    } = {}) {\n      return new Promise(resolve => {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: `$page.${router.app.$route[basis]}`,\n          user,\n          validator: () => false,\n          defaultValue: {}\n        })))\n      })\n    },\n    /**\n     * @description 快速将页面当前的数据 ( $data ) 持久化\n     * @param {Object} context context\n     * @param {Object} param instance {Object} vue 实例\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    pageSet (context, {\n      instance,\n      basis = 'fullPath',\n      user = false\n    }) {\n      return new Promise(resolve => {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: `$page.${router.app.$route[basis]}.$data`,\n          user,\n          validator: () => false,\n          defaultValue: cloneDeep(instance.$data)\n        })))\n      })\n    },\n    /**\n     * @description 快速获取页面快速持久化的数据\n     * @param {Object} context context\n     * @param {Object} param instance {Object} vue 实例\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    pageGet (context, {\n      instance,\n      basis = 'fullPath',\n      user = false\n    }) {\n      return new Promise(resolve => {\n        resolve(cloneDeep(util.db.get(pathInit({\n          dbName: 'database',\n          path: `$page.${router.app.$route[basis]}.$data`,\n          user,\n          defaultValue: cloneDeep(instance.$data)\n        })).value()))\n      })\n    },\n    /**\n     * @description 清空页面快照\n     * @param {Object} context context\n     * @param {Object} param basis {String} 页面区分依据 [ name | path | fullPath ]\n     * @param {Object} param user {Boolean} 是否区分用户\n     */\n    pageClear (context, {\n      basis = 'fullPath',\n      user = false\n    }) {\n      return new Promise(resolve => {\n        resolve(util.db.get(pathInit({\n          dbName: 'database',\n          path: `$page.${router.app.$route[basis]}.$data`,\n          user,\n          validator: () => false,\n          defaultValue: {}\n        })))\n      })\n    }\n  }\n}\n"]}]}