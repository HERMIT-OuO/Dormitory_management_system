{"remainingRequest":"E:\\ICE\\VUE-ADMIN\\node_modules\\thread-loader\\dist\\cjs.js!E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js!E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js!E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\D2Crud\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\D2Crud\\index.vue","mtime":1559288976138},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js","mtime":1558363759028}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport D2Crud from '@d2-projects/d2-crud';\nimport axios from 'axios';\nimport Qs from 'qs';\nVue.use(D2Crud);\nexport default {\n  data: function data() {\n    return {\n      mydormid: '',\n      mytext: '',\n      columns: [{\n        title: '学号',\n        key: 'userid',\n        width: '250'\n      }, {\n        title: '申诉人',\n        key: 'username',\n        width: '180'\n      }, {\n        title: '宿舍号',\n        key: 'dormid',\n        width: '180'\n      }, {\n        title: '报修内容',\n        key: 'text',\n        width: '300'\n      }, {\n        title: '状态',\n        key: 'statues',\n        width: '180',\n        filters: [{\n          text: '待处理',\n          value: '待处理'\n        }, {\n          text: '正在处理',\n          value: '正在处理'\n        }, {\n          text: '已处理',\n          value: '已处理'\n        }],\n        filterMethod: function filterMethod(value, row) {\n          return row.statues === value;\n        },\n        filterPlacement: 'bottom-end'\n      }, {\n        title: '时间',\n        key: 'time',\n        width: '180'\n      }],\n      data: [],\n      options: {\n        stripe: true,\n        highlightCurrentRow: true,\n        border: true\n      },\n      rowHandle: {\n        columnHeader: '操作',\n        custom: [{\n          text: '更改状态',\n          type: 'primary',\n          size: 'small',\n          fixed: 'left',\n          icon: 'el-icon-circle-check',\n          emit: 'custom-emit-1'\n        }],\n        remove: {\n          icon: 'el-icon-delete',\n          size: 'small',\n          fixed: 'right',\n          confirm: true\n        }\n      },\n      formOptions: {\n        labelWidth: '80px',\n        labelPosition: 'left',\n        saveLoading: false,\n        gutter: 20\n      }\n    };\n  },\n  filters: {\n    searchStudent: function searchStudent(arr) {\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i].id.indexOf(myid)) newData.pust(arr[i]);\n      }\n\n      return newData;\n    }\n  },\n  methods: {\n    // 普通的新增\n    addRow: function addRow() {\n      this.$refs.d2Crud.showDialog({\n        mode: 'add'\n      });\n    },\n    handleCustomEvent: function handleCustomEvent(_ref) {\n      var index = _ref.index,\n          row = _ref.row;\n      if (row.statues == '待处理') row.statues = '正在处理';else if (row.statues == '正在处理') row.statues = '已完成';else row.statues = '待处理';\n      this.alterApp(row);\n    },\n    handleRowRemove: function handleRowRemove(_ref2, done) {\n      var _this2 = this;\n\n      var index = _ref2.index,\n          row = _ref2.row;\n      setTimeout(function () {\n        _this2.$message({\n          message: '删除成功',\n          type: 'success'\n        });\n\n        done();\n\n        _this2.delApp(row);\n      }, 300);\n    },\n    handleDialogCancel: function handleDialogCancel(done) {\n      this.$message({\n        message: '取消保存',\n        type: 'warning'\n      });\n      done();\n    },\n    handleSelectionChange: function handleSelectionChange(selection) {\n      console.log(selection);\n    },\n    getAllApp: function getAllApp() {\n      var _this = this;\n\n      axios.get('http://localhost:8080/GetAllApp').then(function (response) {\n        console.log(response);\n        _this.data = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    alterApp: function alterApp(row) {\n      axios.post('http://localhost:8080/AlterAppRow', Qs.stringify(row)).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    delApp: function delApp(row) {\n      //删除某一行，获取当前行的ID，\n      axios.post('http://localhost:8080/DelAppRow', Qs.stringify({\n        text: row.text\n      })).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getAllApp();\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div >\r\n    <!-- title=\"D2 CRUD\" -->\r\n    <!-- add-mode\r\n      :add-button=\"addButton\" \r\n      :form-rules=\"formRules\"\r\n      -->\r\n      <!-- .filter(data => data.name.includes(myname) && data.id.includes(myid) && String(data.dorm_id).includes(mydormid)) -->\r\n    <d2-crud\r\n      ref=\"d2Crud\"\r\n      :columns=\"columns\"\r\n      :data=\"data.filter(data => String(data.dormid).includes(mydormid) && data.text.includes(mytext) )\"\r\n      :options = \"options\"\r\n      selection-row\r\n      index-row\r\n      add-title=\"添加学生\"\r\n      :rowHandle=\"rowHandle\"\r\n      :form-options=\"formOptions\"\r\n      @custom-emit-1=\"handleCustomEvent\"\r\n      @row-remove= \"handleRowRemove\"\r\n      @dialog-cancel=\"handleDialogCancel\"\r\n      @selection-change=\"handleSelectionChange\">\r\n      <div slot=\"header\" class=\"table_header\">\r\n          <el-input v-model=\"mytext\" placeholder=\"请输入要查找的保修内容\" suffix-icon=\"el-icon-search\" style=\"width:15em;margin-right:1.5em;\"></el-input>\r\n          <el-input v-model=\"mydormid\"  placeholder=\"请输入要查找的宿舍号\" suffix-icon=\"el-icon-search\" style=\"width:15em;margin-right:1.5em;\"></el-input>\r\n      </div>\r\n      </d2-crud>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.table_header{\r\n  margin-bottom: 1em;\r\n  /* text-align: right; */\r\n}\r\n\r\n</style>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport D2Crud from '@d2-projects/d2-crud'\r\nimport axios from 'axios'\r\nimport Qs from 'qs'\r\n\r\nVue.use(D2Crud)\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      mydormid:'',\r\n      mytext:'',\r\n      columns: [\r\n        {\r\n          title: '学号',\r\n          key: 'userid',\r\n          width: '250'\r\n        },\r\n        {\r\n          title: '申诉人',\r\n          key: 'username',\r\n          width: '180'\r\n        },\r\n        {\r\n          title: '宿舍号',\r\n          key: 'dormid',\r\n          width: '180'\r\n        },\r\n        {\r\n          title: '报修内容',\r\n          key: 'text',\r\n          width: '300'\r\n        },\r\n        {\r\n          title: '状态',\r\n          key: 'statues',\r\n          width: '180',\r\n          filters: [\r\n            { text: '待处理', value: '待处理' },\r\n            { text: '正在处理', value: '正在处理' },\r\n            { text: '已处理', value: '已处理' }\r\n          ],\r\n          filterMethod (value, row) {\r\n            return row.statues === value\r\n          },\r\n          filterPlacement: 'bottom-end'\r\n        },\r\n        {\r\n          title:'时间',\r\n          key:'time',\r\n          width:'180'\r\n        }\r\n      ],\r\n      data: [\r\n        \r\n      ],\r\n      options: {\r\n        stripe:true,\r\n        highlightCurrentRow:true,\r\n        border:true\r\n      },\r\n      rowHandle: {\r\n        columnHeader: '操作',\r\n        custom: [\r\n          {\r\n            text: '更改状态',\r\n            type: 'primary',\r\n            size: 'small',\r\n            fixed: 'left',\r\n            icon: 'el-icon-circle-check',\r\n            emit: 'custom-emit-1'\r\n          }\r\n        ],\r\n        remove: {\r\n          icon: 'el-icon-delete',\r\n          size: 'small',\r\n          fixed: 'right',\r\n          confirm: true\r\n        }\r\n      },\r\n      formOptions: {\r\n        labelWidth: '80px',\r\n        labelPosition: 'left',\r\n        saveLoading: false,\r\n        gutter: 20\r\n      }\r\n    }\r\n  },\r\n  filters:{\r\n    searchStudent:function(arr){\r\n      var newData = []\r\n      for(var i=0;i<arr.length;i++){\r\n        if(arr[i].id.indexOf(myid))\r\n          newData.pust(arr[i])  \r\n      }\r\n      return newData\r\n    }\r\n  },\r\n  methods: {\r\n     // 普通的新增\r\n    addRow () {\r\n      this.$refs.d2Crud.showDialog({\r\n        mode: 'add'\r\n      })\r\n    },\r\n     handleCustomEvent ({index, row}) {\r\n      if(row.statues=='待处理')\r\n        row.statues='正在处理'\r\n      else if(row.statues=='正在处理')\r\n        row.statues='已完成'\r\n      else\r\n        row.statues='待处理'\r\n      this.alterApp(row)\r\n    },\r\n    handleRowRemove ({index, row},done) {\r\n      setTimeout(() => {\r\n        this.$message({\r\n          message: '删除成功',\r\n          type: 'success'\r\n        })\r\n        done()\r\n        this.delApp(row)\r\n      }, 300)\r\n    },\r\n    handleDialogCancel (done) {\r\n      this.$message({\r\n        message: '取消保存',\r\n        type: 'warning'\r\n      });\r\n      done()\r\n    },\r\n    handleSelectionChange (selection) {\r\n      console.log(selection)\r\n    },\r\n    getAllApp(){\r\n      var _this = this\r\n      axios.get('http://localhost:8080/GetAllApp')\r\n        .then(function (response) {\r\n          console.log(response)\r\n          _this.data = response.data\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    alterApp(row){\r\n      axios.post('http://localhost:8080/AlterAppRow',Qs.stringify(row))\r\n      .then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    },\r\n    delApp(row){\r\n      //删除某一行，获取当前行的ID，\r\n      axios.post('http://localhost:8080/DelAppRow',Qs.stringify({text:row.text}))\r\n      .then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n      \r\n    },\r\n  },\r\n  mounted(){\r\n    this.getAllApp()\r\n  }\r\n}\r\n\r\n</script>\r\n\n<vue-filename-injector>\nexport default function (Component) {\n  Component.options.__source = \"src/pages/Repair/components/D2Crud/index.vue\"\n}\n</vue-filename-injector>\n"],"sourceRoot":"src/pages/Repair/components/D2Crud"}]}