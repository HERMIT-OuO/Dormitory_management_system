{"remainingRequest":"E:\\ICE\\VUE-ADMIN\\node_modules\\thread-loader\\dist\\cjs.js!E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js!E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js!E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\MyCrud\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\MyCrud\\index.vue","mtime":1559225645662},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js","mtime":1558363759028}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport D2Crud from '@d2-projects/d2-crud';\nimport axios from 'axios';\nimport Qs from 'qs';\nimport util from '@/libs/util';\nVue.use(D2Crud);\nexport default {\n  data: function data() {\n    return {\n      myid: '',\n      mytext: '',\n      nowuser: {},\n      columns: [{\n        title: '学号',\n        key: 'userid',\n        width: '150'\n      }, {\n        title: '申诉人',\n        key: 'username',\n        width: '100'\n      }, {\n        title: '宿舍号',\n        key: 'dormid',\n        width: '100'\n      }, {\n        title: '报修内容',\n        key: 'text',\n        width: '350'\n      }, {\n        title: '状态',\n        key: 'statues',\n        width: '100',\n        filters: [{\n          text: '待处理',\n          value: '待处理'\n        }, {\n          text: '正在处理',\n          value: '正在处理'\n        }, {\n          text: '已处理',\n          value: '已处理'\n        }],\n        filterMethod: function filterMethod(value, row) {\n          return row.statues === value;\n        },\n        filterPlacement: 'bottom-end'\n      }],\n      data: [],\n      addTemplate: {\n        userid: {\n          title: '学号',\n          value: util.cookies.get('user-id'),\n          component: {\n            span: 18\n          }\n        },\n        username: {\n          title: '姓名',\n          value: util.cookies.get('user-name'),\n          component: {\n            span: 18\n          }\n        },\n        dormid: {\n          title: '宿舍号',\n          value: util.cookies.get('user-dorm-id'),\n          component: {\n            span: 18\n          }\n        },\n        text: {\n          title: '报修内容',\n          value: '',\n          component: {\n            span: 20\n          }\n        }\n      },\n      addRules: {\n        userid: [{\n          required: true,\n          message: '请输入学号',\n          trigger: 'blur'\n        }],\n        username: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }],\n        text: [{\n          required: true,\n          message: '请输入报修内容',\n          trigger: 'blur'\n        }],\n        dormid: [{\n          required: true,\n          message: '请输入宿舍号',\n          trigger: 'blur'\n        }]\n      },\n      options: {\n        stripe: true,\n        highlightCurrentRow: true,\n        border: true\n      },\n      rowHandle: {\n        columnHeader: '操作',\n        remove: {\n          icon: 'el-icon-delete',\n          size: 'small',\n          fixed: 'right',\n          confirm: true\n        }\n      },\n      formOptions: {\n        labelWidth: '80px',\n        labelPosition: 'left',\n        saveLoading: false,\n        gutter: 20\n      }\n    };\n  },\n  methods: {\n    addRow: function addRow() {\n      this.$refs.d2Crud.showDialog({\n        mode: 'add'\n      });\n    },\n    handleRowAdd: function handleRowAdd(row, done) {\n      var _this2 = this;\n\n      this.formOptions.saveLoading = true;\n      setTimeout(function () {\n        console.log(row);\n\n        _this2.$message({\n          message: '保存成功',\n          type: 'success'\n        });\n\n        done({\n          statues: '待处理'\n        });\n\n        _this2.addApp(row);\n\n        _this2.formOptions.saveLoading = false;\n      }, 300);\n    },\n    handleRowEdit: function handleRowEdit(_ref, done) {\n      var _this3 = this;\n\n      var index = _ref.index,\n          row = _ref.row;\n      this.formOptions.saveLoading = true;\n      setTimeout(function () {\n        _this3.$message({\n          message: '编辑成功',\n          type: 'success'\n        });\n\n        done();\n\n        _this3.alterApp(row.text, temp);\n\n        _this3.formOptions.saveLoading = false;\n      }, 300);\n    },\n    handleRowRemove: function handleRowRemove(_ref2, done) {\n      var _this4 = this;\n\n      var index = _ref2.index,\n          row = _ref2.row;\n      setTimeout(function () {\n        _this4.$message({\n          message: '删除成功',\n          type: 'success'\n        });\n\n        done();\n\n        _this4.delApp(row);\n      }, 300);\n    },\n    handleDialogCancel: function handleDialogCancel(done) {\n      this.$message({\n        message: '取消保存',\n        type: 'warning'\n      });\n      done();\n    },\n    handleSelectionChange: function handleSelectionChange(selection) {\n      console.log(selection);\n    },\n    getStudent: function getStudent(userid) {\n      var _this = this;\n\n      axios.post('http://localhost:8080/GetOneStudent', Qs.stringify({\n        id: userid\n      })).then(function (response) {\n        console.log(response);\n        _this.nowuser = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    addApp: function addApp(row) {\n      var _this = this;\n\n      axios.post('http://localhost:8080/AddAppRow', Qs.stringify(row)).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    getAllStudent: function getAllStudent() {\n      var _this = this;\n\n      axios.get('http://localhost:8080/GetAllApp').then(function (response) {\n        console.log(response);\n        _this.data = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    alterApp: function alterApp(text, temp) {\n      axios.post('http://localhost:8080/AlterAppText', Qs.stringify({\n        text: text,\n        temp: temp\n      })).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    delApp: function delApp(row) {\n      //删除某一行，获取当前行的ID，\n      axios.post('http://localhost:8080/DelAppRow', Qs.stringify({\n        text: row.text\n      })).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getAllStudent();\n    this.myid = util.cookies.get('user-id');\n    this.getStudent(this.myid);\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div >\r\n    <!-- title=\"D2 CRUD\" -->\r\n    <!-- add-mode\r\n      :add-button=\"addButton\" \r\n      :form-rules=\"formRules\"\r\n      -->\r\n      <!-- .filter(data => data.name.includes(myname) && data.id.includes(myid) && String(data.dorm_id).includes(mydormid)) -->\r\n      <!-- && String(data.id).includes(util.cookies.get('user-id')) -->\r\n    <d2-crud\r\n      ref=\"d2Crud\"\r\n      :columns=\"columns\"\r\n      :data=\"data.filter(data =>  String(data.userid).includes(myid) && data.text.includes(mytext) )\"\r\n      :options = \"options\"\r\n      selection-row\r\n      index-row\r\n      add-title=\"申请报修\"\r\n      :add-template = \"addTemplate\"\r\n      :edit-template= \"addTemplate\"\r\n      :add-rules= \"addRules\"\r\n      :rowHandle= \"rowHandle\"\r\n      :form-options= \"formOptions\"\r\n      :edit-rules = \"addRules\"\r\n      @row-add= \"handleRowAdd\"\r\n      @row-edit= \"handleRowEdit\"\r\n      @row-remove= \"handleRowRemove\"\r\n      @dialog-cancel=\"handleDialogCancel\"\r\n      @selection-change=\"handleSelectionChange\">\r\n      <div slot=\"header\" class=\"table_header\">\r\n          <el-input v-model=\"mytext\" placeholder=\"请输入要查找的保修内容\" suffix-icon=\"el-icon-search\" style=\"width:15em;margin-right:1.5em;\"></el-input>\r\n          <el-button  @click=\"addRow\"  icon=\"el-icon-circle-plus-outline\"   style=\"margin-left:65em;\">申请报修</el-button>\r\n      </div>\r\n      </d2-crud>\r\n  </div>\r\n</template>\r\n\r\n<style>\r\n.table_header{\r\n  margin-bottom: 1em;\r\n  /* text-align: right; */\r\n}\r\n\r\n</style>\r\n\r\n<script>\r\nimport Vue from 'vue'\r\nimport D2Crud from '@d2-projects/d2-crud'\r\nimport axios from 'axios'\r\nimport Qs from 'qs'\r\nimport util from '@/libs/util'\r\n\r\nVue.use(D2Crud)\r\n\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      myid:'',\r\n      mytext:'',\r\n      nowuser:{},\r\n      columns: [\r\n        {\r\n          title: '学号',\r\n          key: 'userid',\r\n          width: '150'\r\n        },\r\n        {\r\n          title: '申诉人',\r\n          key: 'username',\r\n          width: '100'\r\n        },\r\n        {\r\n          title: '宿舍号',\r\n          key: 'dormid',\r\n          width: '100'\r\n        },\r\n        {\r\n          title: '报修内容',\r\n          key: 'text',\r\n          width: '350'\r\n        },\r\n        {\r\n          title: '状态',\r\n          key: 'statues',\r\n          width: '100',\r\n          filters: [\r\n            { text: '待处理', value: '待处理' },\r\n            { text: '正在处理', value: '正在处理' },\r\n            { text: '已处理', value: '已处理' }\r\n          ],\r\n          filterMethod (value, row) {\r\n            return row.statues === value\r\n          },\r\n          filterPlacement: 'bottom-end'\r\n        }\r\n      ],\r\n      data: [\r\n        \r\n      ],\r\n      addTemplate: {\r\n        userid: {\r\n          title: '学号',\r\n          value: util.cookies.get('user-id'),\r\n          component: {\r\n            span: 18\r\n          }\r\n        },\r\n        username: {\r\n          title: '姓名',\r\n          value: util.cookies.get('user-name'),\r\n          component: {\r\n            span: 18\r\n          }\r\n        },\r\n        dormid: {\r\n          title: '宿舍号',\r\n          value: util.cookies.get('user-dorm-id'),\r\n          component: {\r\n            span: 18\r\n          }\r\n        },\r\n        text: {\r\n          title: '报修内容',\r\n          value: '',\r\n          component: {\r\n            span:20\r\n          }\r\n        },\r\n      },\r\n      addRules: {\r\n        userid: [ { required: true, message: '请输入学号', trigger: 'blur' } ],\r\n        username: [ { required: true, message: '请输入姓名', trigger: 'blur' } ],\r\n        text:[{ required: true, message: '请输入报修内容', trigger: 'blur' }],\r\n        dormid:[ {required: true, message: '请输入宿舍号', trigger: 'blur'} ]\r\n      },\r\n      options: {\r\n        stripe:true,\r\n        highlightCurrentRow:true,\r\n        border:true\r\n      },\r\n      rowHandle: {\r\n        columnHeader: '操作',\r\n        remove: {\r\n          icon: 'el-icon-delete',\r\n          size: 'small',\r\n          fixed: 'right',\r\n          confirm: true\r\n        }\r\n      },\r\n      formOptions: {\r\n        labelWidth: '80px',\r\n        labelPosition: 'left',\r\n        saveLoading: false,\r\n        gutter: 20\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    addRow () {\r\n      this.$refs.d2Crud.showDialog({\r\n        mode: 'add'\r\n      })\r\n    },\r\n    handleRowAdd (row, done) {\r\n      this.formOptions.saveLoading = true\r\n      setTimeout(() => {\r\n        console.log(row)\r\n        this.$message({\r\n          message: '保存成功',\r\n          type: 'success'\r\n        });\r\n        done({statues:'待处理'})\r\n        this.addApp(row)\r\n        this.formOptions.saveLoading = false\r\n      }, 300);\r\n    },\r\n    handleRowEdit ({index, row}, done) {\r\n      this.formOptions.saveLoading = true\r\n      setTimeout(() => {\r\n        this.$message({\r\n          message: '编辑成功',\r\n          type: 'success'\r\n        })\r\n        done()\r\n        this.alterApp(row.text,temp)\r\n        this.formOptions.saveLoading = false\r\n      }, 300)\r\n    },\r\n    handleRowRemove ({index, row},done) {\r\n      setTimeout(() => {\r\n        this.$message({\r\n          message: '删除成功',\r\n          type: 'success'\r\n        })\r\n        done()\r\n        this.delApp(row)\r\n      }, 300)\r\n    },\r\n    handleDialogCancel (done) {\r\n      this.$message({\r\n        message: '取消保存',\r\n        type: 'warning'\r\n      });\r\n      done()\r\n    },\r\n    handleSelectionChange (selection) {\r\n      console.log(selection)\r\n    },\r\n    getStudent(userid){\r\n      var _this = this\r\n      axios.post('http://localhost:8080/GetOneStudent',Qs.stringify({id:userid}))\r\n        .then(function (response) {\r\n          console.log(response)\r\n          _this.nowuser = response.data\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    addApp(row){\r\n      var _this = this\r\n      axios.post('http://localhost:8080/AddAppRow',Qs.stringify(row))\r\n        .then(function (response) {\r\n          console.log(response)\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    getAllStudent(){\r\n      var _this = this\r\n      axios.get('http://localhost:8080/GetAllApp')\r\n        .then(function (response) {\r\n          console.log(response)\r\n          _this.data = response.data\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    alterApp(text,temp){\r\n      axios.post('http://localhost:8080/AlterAppText',Qs.stringify({text:text,temp:temp}))\r\n      .then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n    },\r\n    delApp(row){\r\n      //删除某一行，获取当前行的ID，\r\n      axios.post('http://localhost:8080/DelAppRow',Qs.stringify({text:row.text}))\r\n      .then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n      });\r\n      \r\n    },\r\n  },\r\n  mounted(){\r\n    this.getAllStudent()\r\n    this.myid = util.cookies.get('user-id')\r\n    this.getStudent(this.myid)\r\n  }\r\n}\r\n\r\n</script>\r\n\n<vue-filename-injector>\nexport default function (Component) {\n  Component.options.__source = \"src/pages/Repair/components/MyCrud/index.vue\"\n}\n</vue-filename-injector>\n"],"sourceRoot":"src/pages/Repair/components/MyCrud"}]}