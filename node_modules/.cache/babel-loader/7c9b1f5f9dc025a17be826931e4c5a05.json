{"remainingRequest":"E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js!E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js!E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\D2Crud\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\ICE\\VUE-ADMIN\\src\\pages\\Repair\\components\\D2Crud\\index.vue","mtime":1559288976138},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\ICE\\VUE-ADMIN\\tools\\vue-filename-injector\\src\\lib\\injector.js","mtime":1558363759028}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport Vue from 'vue';\nimport D2Crud from '@d2-projects/d2-crud';\nimport axios from 'axios';\nimport Qs from 'qs';\nVue.use(D2Crud);\nexport default {\n  data: function data() {\n    return {\n      mydormid: '',\n      mytext: '',\n      columns: [{\n        title: '学号',\n        key: 'userid',\n        width: '250'\n      }, {\n        title: '申诉人',\n        key: 'username',\n        width: '180'\n      }, {\n        title: '宿舍号',\n        key: 'dormid',\n        width: '180'\n      }, {\n        title: '报修内容',\n        key: 'text',\n        width: '300'\n      }, {\n        title: '状态',\n        key: 'statues',\n        width: '180',\n        filters: [{\n          text: '待处理',\n          value: '待处理'\n        }, {\n          text: '正在处理',\n          value: '正在处理'\n        }, {\n          text: '已处理',\n          value: '已处理'\n        }],\n        filterMethod: function filterMethod(value, row) {\n          return row.statues === value;\n        },\n        filterPlacement: 'bottom-end'\n      }, {\n        title: '时间',\n        key: 'time',\n        width: '180'\n      }],\n      data: [],\n      options: {\n        stripe: true,\n        highlightCurrentRow: true,\n        border: true\n      },\n      rowHandle: {\n        columnHeader: '操作',\n        custom: [{\n          text: '更改状态',\n          type: 'primary',\n          size: 'small',\n          fixed: 'left',\n          icon: 'el-icon-circle-check',\n          emit: 'custom-emit-1'\n        }],\n        remove: {\n          icon: 'el-icon-delete',\n          size: 'small',\n          fixed: 'right',\n          confirm: true\n        }\n      },\n      formOptions: {\n        labelWidth: '80px',\n        labelPosition: 'left',\n        saveLoading: false,\n        gutter: 20\n      }\n    };\n  },\n  filters: {\n    searchStudent: function searchStudent(arr) {\n      var newData = [];\n\n      for (var i = 0; i < arr.length; i++) {\n        if (arr[i].id.indexOf(myid)) newData.pust(arr[i]);\n      }\n\n      return newData;\n    }\n  },\n  methods: {\n    // 普通的新增\n    addRow: function addRow() {\n      this.$refs.d2Crud.showDialog({\n        mode: 'add'\n      });\n    },\n    handleCustomEvent: function handleCustomEvent(_ref) {\n      var index = _ref.index,\n          row = _ref.row;\n      if (row.statues == '待处理') row.statues = '正在处理';else if (row.statues == '正在处理') row.statues = '已完成';else row.statues = '待处理';\n      this.alterApp(row);\n    },\n    handleRowRemove: function handleRowRemove(_ref2, done) {\n      var _this2 = this;\n\n      var index = _ref2.index,\n          row = _ref2.row;\n      setTimeout(function () {\n        _this2.$message({\n          message: '删除成功',\n          type: 'success'\n        });\n\n        done();\n\n        _this2.delApp(row);\n      }, 300);\n    },\n    handleDialogCancel: function handleDialogCancel(done) {\n      this.$message({\n        message: '取消保存',\n        type: 'warning'\n      });\n      done();\n    },\n    handleSelectionChange: function handleSelectionChange(selection) {\n      console.log(selection);\n    },\n    getAllApp: function getAllApp() {\n      var _this = this;\n\n      axios.get('http://localhost:8080/GetAllApp').then(function (response) {\n        console.log(response);\n        _this.data = response.data;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    alterApp: function alterApp(row) {\n      axios.post('http://localhost:8080/AlterAppRow', Qs.stringify(row)).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    },\n    delApp: function delApp(row) {\n      //删除某一行，获取当前行的ID，\n      axios.post('http://localhost:8080/DelAppRow', Qs.stringify({\n        text: row.text\n      })).then(function (response) {\n        console.log(response);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getAllApp();\n  }\n};",null]}